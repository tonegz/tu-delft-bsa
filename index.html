<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BSA Calculator: Aerospace Engineering at TU Delft</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      margin: 0;
      padding: 0.25rem 2rem 2rem 2rem;
      background: #f6f8fb;
      color: #1f2937;
      position: relative;
    }

    .logo {
      position: absolute;
      top: 0rem;
      right: 2rem;
      max-width: 200px;
      max-height: 100px;
      width: auto;
      height: auto;
    }
    h1 { margin-bottom: 0.25rem; }
    .subtitle { color: #6b7280; margin-bottom: 1.5rem; }
    .container { max-width: 950px; margin: 0 auto; }

    .progress-card {
      background: white;
      padding: 1.25rem 1.5rem 1.5rem;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.05);
      margin-bottom: 2rem;
    }

    .progress-bar {
      position: relative;
      height: 22px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
      margin-top: 0.75rem;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      transition: width 0.3s ease, background 0.3s ease;
    }

    .threshold-marker {
      position: absolute;
      left: 75%;
      top: -6px;
      bottom: -6px;
      width: 2px;
      background: #374151;
    }

    .threshold-label {
      position: absolute;
      left: 75%;
      top: -1.4rem;
      transform: translateX(-50%);
      font-size: 0.75rem;
      color: #374151;
    }

    .status {
      margin-top: 0.5rem;
    }

    .status.pass { color: #059669; }
    .status.fail { color: #2563eb; }

    .grid {
      display: grid;
      grid-template-columns: auto 1fr auto repeat(4, 36px) auto;
      gap: 0.75rem 0.75rem;
      align-items: center;
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.05);
    }

    .grid-header {
      font-weight: 600;
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 0.5rem;
      text-align: center;
    }

    .grid-header.left { text-align: left; }

    .course { display: contents; }

    .course-name {
      cursor: pointer;
      user-select: none;
    }

    .ec {
      text-align: center;
      color: #9ca3af;
      transition: color 0.2s ease, font-weight 0.2s ease;
    }

    .ec.passed {
      color: #111827;
      font-weight: 600;
    }

    input[type="checkbox"] {
      transform: scale(1.15);
      cursor: pointer;
    }

    .quarter {
      height: 26px;
      border-radius: 6px;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .quarter.active {
      background: #bbf7d0; /* lighter green */
      color: #065f46;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      .grid {
        grid-template-columns: auto 1fr auto auto;
        gap: 0.75rem 0.75rem;
      }

      .grid-header:nth-child(4),
      .grid-header:nth-child(5),
      .grid-header:nth-child(6),
      .grid-header:nth-child(7) {
        display: none;
      }

      .quarter {
        display: none;
      }

      .full-title {
        display: none;
      }
      }
    }
  </style>
</head>
<body>
  <img src="logo_rgb.svg" alt="TU Delft Logo" class="logo" />
  <div class="container">
    <h1>BSA Calculator<span class="full-title">: Aerospace Engineering</span></h1>
    <div class="subtitle">You must obtain at least 45 credits in the first academic year, <a href="https://www.tudelft.nl/en/student/my-study-me/rules-guidelines-and-participation/binding-recommendation-on-continuation-of-studies">or else</a></div>

    <div class="progress-card">
      <div><strong>Total ECs collected:</strong> <span id="totalEC">0</span> / 60</div>
      <div class="progress-bar">
        <div class="threshold-label">45 EC</div>
        <div class="threshold-marker"></div>
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="status fail" id="statusText"></div>
    </div>

    <div class="grid" id="courseGrid">
      <div></div>
      <div class="grid-header left">Course</div>
      <div class="grid-header">EC</div>
      <div class="grid-header">Q1</div>
      <div class="grid-header">Q2</div>
      <div class="grid-header">Q3</div>
      <div class="grid-header">Q4</div>
      <div></div>
    </div>

  <script>
    const BSA_THRESHOLD = 45;
    const TOTAL_EC = 60;

    const courses = [
      { name: "Introduction to AE I", ec: 5, q: [1] },
      { name: "Statics", ec: 4, q: [1] },
      { name: "Calculus I", ec: 6, q: [1,2] },
      { name: "Exploring Aerospace Engineering", ec: 3, q: [1,2] },
      { name: "Engineering Drawing", ec: 2, q: [1,2] },
      { name: "Aerospace Materials", ec: 3, q: [2] },
      { name: "Introduction to AE II", ec: 4, q: [2] },
      { name: "Dynamics", ec: 3, q: [2] },
      { name: "Aerospace Mechanics of Materials", ec: 3, q: [3] },
      { name: "Calculus II", ec: 5, q: [3] },
      { name: "Physics", ec: 6, q: [3,4] },
      { name: "Design and Construction", ec: 5, q: [3,4] },
      { name: "Aerospace Design and Systems Engineering Elements", ec: 4, q: [3,4] },
      { name: "Programming and Scientific Computing in Python for AE1", ec: 2, q: [4] },
      { name: "Linear Algebra", ec: 5, q: [4] }
    ];

    const grid = document.getElementById("courseGrid");
    const totalECEl = document.getElementById("totalEC");
    const progressFill = document.getElementById("progressFill");
    const statusText = document.getElementById("statusText");

    courses.forEach((course, i) => {
      const id = `cb-${i}`;
      const row = document.createElement("div");
      row.className = "course";

      row.innerHTML = `
        <div><input type="checkbox" id="${id}" data-ec="${course.ec}" /></div>
        <label for="${id}" class="course-name">${course.name}</label>
        <div class="ec" id="ec-${i}">${course.ec}</div>
        ${[1,2,3,4].map(q => 
          `<div class="quarter ${course.q.includes(q) ? 'active' : ''}">${course.q.includes(q) ? q : ''}</div>`
        ).join('')}
        <div></div>
      `;

      grid.appendChild(row);
    });

    function updateProgress() {
      const checkboxes = grid.querySelectorAll("input[type=checkbox]");
      let total = 0;

      checkboxes.forEach((cb, i) => {
        const ecEl = document.getElementById(`ec-${i}`);
        if (cb.checked) {
          total += Number(cb.dataset.ec);
          ecEl.classList.add("passed");
        } else {
          ecEl.classList.remove("passed");
        }
      });

      totalECEl.textContent = total;

      const percent = Math.min((total / TOTAL_EC) * 100, 100);
      progressFill.style.width = percent + "%";

      let color;
      if (total >= BSA_THRESHOLD) {
        color = "linear-gradient(90deg, #16a34a, #16a34a)";
        statusText.textContent = "ðŸŽ‰ BSA passed! You have enough ECs.";
        statusText.className = "status pass";
      } else if (total >= BSA_THRESHOLD / 2) {
        color = "linear-gradient(90deg, #ef4444, #f59e0b)";
        const remaining = BSA_THRESHOLD - total;
        const ecLabel = remaining === 1 ? 'EC' : 'ECs';
        statusText.textContent = `You need ${remaining} more`;
        statusText.className = "status fail";
      } else {
        color = "linear-gradient(90deg, #ef4444, #ef4444)";
        const remaining = BSA_THRESHOLD - total;
        const ecLabel = remaining === 1 ? 'EC' : 'ECs';
        statusText.textContent = `You need ${remaining} more`;
        statusText.className = "status fail";
      }

      progressFill.style.background = color;
    }

    grid.addEventListener("change", updateProgress);
  </script>
</body>
</html>
